(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fb70b2c"],{"0172":function(e,t,n){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14ac":function(e,t,n){"use strict";n("ac1f"),n("841c");var r=n("7a23"),a={class:"row"},c={class:"col-md-4 pe-md-1 mb-md-2 mb-3"},s=Object(r["i"])("option",{selected:"",value:"desc"},"最新貼文",-1),o=Object(r["i"])("option",{value:"asc"},"最舊貼文",-1),i=[s,o],u={class:"col-md-8"},d={class:"input-group mb-3"},l=Object(r["i"])("i",{class:"bi bi-search fs-5"},null,-1),p=[l];function h(e,t,n,s,o,l){return Object(r["y"])(),Object(r["h"])("div",a,[Object(r["i"])("div",c,[Object(r["U"])(Object(r["i"])("select",{id:"newPost",class:"form-select py-2","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.search.timeSort=e}),onChange:t[1]||(t[1]=function(){return l.sendSearch&&l.sendSearch.apply(l,arguments)})},i,544),[[r["O"],o.search.timeSort]])]),Object(r["i"])("div",u,[Object(r["i"])("div",d,[Object(r["U"])(Object(r["i"])("input",{type:"text",class:"form-control",placeholder:"搜尋貼文","aria-label":"search","aria-describedby":"button-search","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.search.q=e}),onKeyup:t[3]||(t[3]=Object(r["V"])((function(){return l.sendSearch&&l.sendSearch.apply(l,arguments)}),["enter"]))},null,544),[[r["P"],o.search.q]]),Object(r["i"])("button",{class:"btn btn-primary fs-5 rounded-0 px-3 border-dark",type:"button",id:"button-search",onClick:t[4]||(t[4]=function(){return l.sendSearch&&l.sendSearch.apply(l,arguments)})},p)])])])}var b={name:"SearchBar",data:function(){return{search:{timeSort:"desc",q:""}}},emits:["search"],created:function(){this.sendSearch()},methods:{sendSearch:function(){this.$emit("search",this.search)}}},f=n("d959"),m=n.n(f);const O=m()(b,[["render",h]]);t["a"]=O},"841c":function(e,t,n){"use strict";var r=n("c65b"),a=n("d784"),c=n("825a"),s=n("1d80"),o=n("129f"),i=n("577e"),u=n("dc4a"),d=n("14c3");a("search",(function(e,t,n){return[function(t){var n=s(this),a=void 0==t?void 0:u(t,e);return a?r(a,t,n):new RegExp(t)[e](i(n))},function(e){var r=c(this),a=i(e),s=n(t,r,a);if(s.done)return s.value;var u=r.lastIndex;o(u,0)||(r.lastIndex=0);var l=d(r,a);return o(r.lastIndex,u)||(r.lastIndex=u),null===l?-1:l.index}]}))},"90ab":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),a=n("0f71"),c=n.n(a),s=function(e){return Object(r["B"])("data-v-0d94f2a2"),e=e(),Object(r["z"])(),e},o={class:"container mt-7 mb-7 mb-md-0 px-lg-12"},i={class:"row"},u={class:"col-md-7"},d={class:"card mb-5 border-2 position-relative"},l={class:"d-flex align-items-center"},p={key:0,class:"image bg-secondary me-1 img-fluid",src:c.a,alt:"user"},h=["src"],b={class:"d-flex justify-content-between w-100"},f={class:"mb-0 fw-bold"},m={key:0},O=s((function(){return Object(r["i"])("div",{class:"position-absolute rounded border border-dark border-2 w-100 py-6 bg-white",style:{"z-index":"-1",top:"6px",left:"-6px"}},null,-1)})),j={key:0,class:"ps-0"};function g(e,t,n,a,c,s){var g,v=Object(r["H"])("SearchBar"),w=Object(r["H"])("PostCard"),y=Object(r["H"])("NoPostsCard"),x=Object(r["H"])("Sidebar"),k=Object(r["H"])("SidebarSm");return Object(r["y"])(),Object(r["h"])("section",o,[Object(r["i"])("div",i,[Object(r["i"])("div",u,[Object(r["i"])("div",d,[Object(r["i"])("div",l,[c.personal.photo?(Object(r["y"])(),Object(r["h"])("img",{key:1,class:"image bg-secondary me-1 img-fluid",src:c.personal.photo,alt:"user"},null,8,h)):(Object(r["y"])(),Object(r["h"])("img",p)),Object(r["i"])("div",b,[Object(r["i"])("div",null,[Object(r["i"])("p",f,Object(r["K"])(c.personal.name),1),Object(r["i"])("small",null,Object(r["K"])(c.personal.followerLength)+" 人追蹤",1)]),s.isSelf?Object(r["g"])("",!0):(Object(r["y"])(),Object(r["h"])("div",m,[c.personal.checkFollow?(Object(r["y"])(),Object(r["h"])("button",{key:1,type:"button",class:"btn btn-gray-light me-2 px-4 shadow-black",onClick:t[1]||(t[1]=function(){return s.removeFollow&&s.removeFollow.apply(s,arguments)})}," 取消追蹤 ")):(Object(r["y"])(),Object(r["h"])("button",{key:0,type:"button",class:"btn btn-warning me-2 px-4 shadow-black",onClick:t[0]||(t[0]=function(){return s.addFollow&&s.addFollow.apply(s,arguments)})}," 追蹤 "))]))])]),O]),Object(r["l"])(v,{onSearch:s.getUserPosts},null,8,["onSearch"]),null!==(g=c.posts)&&void 0!==g&&g.length?(Object(r["y"])(),Object(r["h"])("ul",j,[(Object(r["y"])(!0),Object(r["h"])(r["a"],null,Object(r["F"])(c.posts,(function(e){return Object(r["y"])(),Object(r["f"])(w,{post:e,key:e.name+e._id,onUpdate:s.getUserPosts},null,8,["post","onUpdate"])})),128))])):(Object(r["y"])(),Object(r["f"])(y,{key:1,message:"此使用者目前尚無動態!"}))]),Object(r["l"])(x)]),Object(r["l"])(k)])}var v=n("5530"),w=n("1da1"),y=(n("96cf"),n("a9e3"),n("99af"),n("ac1f"),n("841c"),n("d3b7"),n("5ea5")),x=n("7441"),k=n("26c3"),P=n("14ac"),S=n("251f"),$=n("5502"),R={name:"personal",components:{Sidebar:y["a"],SidebarSm:x["a"],NoPostsCard:S["a"],PostCard:k["a"],SearchBar:P["a"]},props:{id:{type:[String,Number],require:!0}},data:function(){return{userInfo:{},personal:{},posts:"",search:{}}},created:function(){var e=this;return Object(w["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$watch((function(){return e.id}),function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkPersonal(n);case 2:if(e.userInfo=t.sent,!e.userInfo){t.next=6;break}return t.next=6,e.getUserPosts();case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t.next=3,e.checkPersonal(e.id);case 3:return t.next=5,e.getUserPosts();case 5:case"end":return t.stop()}}),t)})))()},computed:Object(v["a"])(Object(v["a"])({},Object($["b"])(["info","token"])),{},{isSelf:function(){return this.id===this.info._id}}),methods:{checkPersonal:function(e){var t=this;return Object(w["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$store.dispatch("updateLoading",!0),r={method:"GET",url:"".concat("https://metawall-express-final.onrender.com","/api/v1/user/profile/").concat(e),headers:{authorization:"Bearer ".concat(t.token)}},n.next=4,t.$http(r).then((function(e){return t.$store.dispatch("updateLoading",!1),t.personal=e.data.message,!0})).catch((function(){return t.$store.dispatch("updateLoading",!1),t.$router.push({name:"個人貼文牆頁",params:{id:t.info._id}}),!1}));case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},getUserPosts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.search;return new Promise((function(n,r){e.search=t,e.$store.dispatch("updateLoading",!0);var a={method:"GET",url:"".concat("https://metawall-express-final.onrender.com","/api/v1/post/user/").concat(e.id),headers:{authorization:"Bearer ".concat(e.token)}};e.$http(a).then((function(t){e.posts=t.data.message,n(t.data.message),e.$store.dispatch("updateLoading",!1)})).catch((function(t){r(t.response.data.message),e.$store.dispatch("updateLoading",!1)}))}))},addFollow:function(){var e=this;return new Promise((function(t,n){e.$store.dispatch("updateLoading",!0);var r={method:"POST",url:"".concat("https://metawall-express-final.onrender.com","/api/v1/user/").concat(e.id,"/follow"),headers:{authorization:"Bearer ".concat(e.token)}};e.$http(r).then(function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t(r.data.message),n.next=3,e.checkPersonal(e.id);case 3:return n.next=5,e.getUserPosts();case 5:e.$store.dispatch("updateLoading",!1);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(r.response.data.message),t.next=3,e.checkPersonal(e.id);case 3:return t.next=5,e.getUserPosts();case 5:e.$store.dispatch("updateLoading",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},removeFollow:function(){var e=this;return new Promise((function(t,n){e.$store.dispatch("updateLoading",!0);var r={method:"DELETE",url:"".concat("https://metawall-express-final.onrender.com","/api/v1/user/").concat(e.id,"/follow"),headers:{authorization:"Bearer ".concat(e.token)}};e.$http(r).then(function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t(r.data.message),n.next=3,e.checkPersonal(e.id);case 3:return n.next=5,e.getUserPosts();case 5:e.$store.dispatch("updateLoading",!1);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n(r.response.data.message),t.next=3,e.checkPersonal(e.id);case 3:return t.next=5,e.getUserPosts();case 5:e.$store.dispatch("updateLoading",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))}}},U=(n("9a7b"),n("d959")),L=n.n(U);const B=L()(R,[["render",g],["__scopeId","data-v-0d94f2a2"]]);t["default"]=B},"9a7b":function(e,t,n){"use strict";n("0172")}}]);
//# sourceMappingURL=chunk-7fb70b2c.81a2b752.js.map