{"version":3,"sources":["webpack:///./src/views/ForgetPassword.vue","webpack:///./src/views/ForgetPassword.vue?7c60","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/assets/img/banner.svg"],"names":["class","style","_createElementVNode","src","_imports_0","alt","draggable","type","_createElementBlock","_hoisted_4","_hoisted_6","_hoisted_7","$data","_createBlock","_component_Form","onSubmit","$options","errors","_createVNode","_component_Field","id","name","placeholder","required","email","$event","rules","disabled","_component_error_message","verification","_toDisplayString","_hoisted_14","_hoisted_10","data","sendEmail","errorMessage","info","methods","forgetPassword","Promise","resolve","reject","$store","dispatch","config","method","url","process","$http","then","response","catch","error","message","user","photo","_id","token","$router","push","__exports__","render","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","module","exports"],"mappings":"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","file":"js/chunk-24741fea.5f73672c.js","sourcesContent":["<template>\r\n  <section class=\"vh-100 d-flex justify-content-center align-items-center\">\r\n    <div\r\n      class=\"card px-lg-7 px-3 bg-secondary border-2 shadow-gray rounded-0\"\r\n      style=\"width: 56rem\"\r\n    >\r\n      <div class=\"row py-lg-11\">\r\n        <div class=\"col-md-6 d-md-flex align-items-center justify-content-center d-none\">\r\n          <img src=\"~@/assets/img/banner.svg\" alt=\"signin\" class=\"img-fluid\" draggable=\"false\"/>\r\n        </div>\r\n        <div class=\"col-md-6\">\r\n          <h1 class=\"mb-3 text-center text-primary metawall-logo\">MetaWall</h1>\r\n          <p class=\"h4 mb-3 text-center\">忘記密碼</p>\r\n            <Form v-slot=\"{ errors }\" class=\"needs-validation\" v-if=\"!sendEmail\"\r\n            @submit=\"forgetPassword\">\r\n                <div class=\"form-group mb-3\">\r\n                  <Field\r\n                    type=\"email\"\r\n                    class=\"form-control font-azeret\"\r\n                    :class=\"{ 'is-invalid': errors['email'] }\"\r\n                    id=\"userEmail\"\r\n                    name=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required\r\n                    v-model=\"info.email\"\r\n                    rules=\"email|required\"\r\n                    :disabled=\"sendEmail\">\r\n                  </Field>\r\n                  <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n                </div>\r\n                <p v-if=\"errorMessage\" class=\"text-danger text-center fs-7 mb-2 d-block\">\r\n                  {{ errorMessage }}\r\n                </p>\r\n                <div class=\"d-grid gap-2 mb-2\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    class=\"btn btn-primary shadow-black rounded-3\">\r\n                    送出\r\n                  </button>\r\n                </div>\r\n            </Form>\r\n            <Form v-slot=\"{ errors }\" class=\"needs-validation\" v-else\r\n            @submit=\"verification\">\r\n                <div class=\"form-group mb-3\">\r\n                  <Field\r\n                    type=\"email\"\r\n                    class=\"form-control font-azeret\"\r\n                    :class=\"{ 'is-invalid': errors['email'] }\"\r\n                    id=\"userEmail\"\r\n                    name=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required\r\n                    v-model=\"info.email\"\r\n                    rules=\"email|required\"\r\n                    :disabled=\"sendEmail\">\r\n                  </Field>\r\n                  <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n                </div>\r\n                <div class=\"form-group mb-3\" v-if=\"sendEmail\">\r\n                  <Field\r\n                    type=\"text\"\r\n                    class=\"form-control font-azeret\"\r\n                    :class=\"{ 'is-invalid': errors['verification'] }\"\r\n                    id=\"verification\"\r\n                    name=\"verification\"\r\n                    placeholder=\"驗證碼\"\r\n                    required\r\n                    v-model=\"info.verification\"\r\n                    rules=\"required|min:4|numeric\">\r\n                  </Field>\r\n                  <error-message name=\"verification\" class=\"invalid-feedback\"></error-message>\r\n                </div>\r\n                <p v-if=\"errorMessage\" class=\"text-danger text-center fs-7 mb-2 d-block\">\r\n                  {{ errorMessage }}\r\n                </p>\r\n                <div class=\"d-grid gap-2 mb-2\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    class=\"btn btn-primary shadow-black rounded-3\">\r\n                    送出\r\n                  </button>\r\n                </div>\r\n            </Form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ForgetPassword',\r\n  data () {\r\n    return {\r\n      sendEmail: false,\r\n      errorMessage: '',\r\n      info: {\r\n        email: '',\r\n        verification: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    forgetPassword () {\r\n      return new Promise((resolve, reject) => {\r\n        this.$store.dispatch('updateLoading', true)\r\n        const data = {\r\n          email: this.info.email\r\n        }\r\n        const config = {\r\n          method: 'POST',\r\n          url: `${process.env.VUE_APP_APIPATH}/api/v1/sendMail`,\r\n          data\r\n        }\r\n        this.$http(config).then((response) => {\r\n          this.$store.dispatch('updateLoading', false)\r\n          this.sendEmail = true\r\n        }).catch((error) => {\r\n          this.$store.dispatch('updateLoading', false)\r\n          reject(error.response.data.message)\r\n          this.errorMessage = error.response.data.message\r\n        })\r\n      })\r\n    },\r\n    verification () {\r\n      return new Promise((resolve, reject) => {\r\n        this.$store.dispatch('updateLoading', true)\r\n        const config = {\r\n          method: 'POST',\r\n          url: `${process.env.VUE_APP_APIPATH}/api/v1/verification`,\r\n          data: this.info\r\n        }\r\n        this.$http(config).then((response) => {\r\n          this.$store.dispatch('updateLoading', false)\r\n          const data = response.data.user\r\n          this.$store.dispatch('updateInfo', {\r\n            name: data.name,\r\n            photo: data.photo,\r\n            _id: data._id\r\n          })\r\n          this.$store.dispatch('updateToken', data.token)\r\n          this.$router.push({ name: '首頁' })\r\n        }).catch((error) => {\r\n          this.$store.dispatch('updateLoading', false)\r\n          reject(error.response.data.message)\r\n          this.errorMessage = error.response.data.message\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import { render } from \"./ForgetPassword.vue?vue&type=template&id=4146c33c\"\nimport script from \"./ForgetPassword.vue?vue&type=script&lang=js\"\nexport * from \"./ForgetPassword.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\johnny\\\\Desktop\\\\metawall-front\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","module.exports = __webpack_public_path__ + \"img/banner.6ac7abb2.svg\";"],"sourceRoot":""}